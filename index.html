<html>
    <head>
        <link rel="stylesheet" href="node_modules/myscript/dist/myscript.min.css"/>
        <script src="myscript.min.js"></script>
        <script src="hammer.min.js"></script>
        <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
        <script src="https://hammerjs.github.io/dist/hammer.js"></script>
        <style>
            #editor {
                border:1px solid #000;
                width: 2cm;
                height: 2cm;
            }
            #lol {
              background: silver;
              height: 2cm;
              text-align: center;
              font: 30px/300px Helvetica, Arial, sans-serif;
            }
        </style>
    </head>
    <body>
        <h1>This worked</h1>
        <div id="editor">
        <div id="tap"></div>
        </div>
        <p id="textbar"></p>
    <script>
        const editorElement = document.getElementById('editor');
        MyScript.register(editorElement, {
            recognitionParams: {
                type: 'TEXT',
                server: {
                    applicationKey: 'd2c81bd7-a32a-4f6c-ac5b-fe6ff8d66a15',
                    hmacKey: '094b7362-bc5e-46fb-a379-85196945e12a'
                }
            }
        });
        var text = "";
        var i=0;
        var run = true;
        editorElement.addEventListener('changed', async function(event) {
            if(document.getElementsByClassName("prompter-text")[0].firstChild==null){
           
            await setTimeout(function(){ 
    
            if(document.getElementsByClassName("prompter-text")[0].firstChild)
            {
                
                text +=  document.getElementsByClassName("prompter-text")[0].firstChild.innerText;
                console.log(text);
                document.getElementById("textbar").innerText = text;
                editorElement.editor.clear();
                run = !run;
            }
            
                
        }, 100); 
    
    }
        else {
            text +=  document.getElementsByClassName("prompter-text")[0].firstChild.innerText;
                console.log(text);
                document.getElementById("textbar").innerText = text;
                editorElement.editor.clear();
            
        }
        });
    

        var tapElement = document.getElementById('tap');
        // We create a manager object, which is the same as Hammer(), but without the presetted recognizers.
        var mc = new Hammer.Manager(tapElement);
        // Tap recognizer with minimal 2 taps
        mc.add( new Hammer.Tap({ event: 'doubletap', taps: 2 }) );
        // Single tap recognizer
        mc.add( new Hammer.Tap({ event: 'singletap' }) );
        // we want to recognize this simulatenous, so a quadrupletap will be detected even while a tap has been recognized.
        mc.get('doubletap').recognizeWith('singletap');
        // we only want to trigger a tap, when we don't have detected a doubletap
        mc.get('singletap').requireFailure('doubletap');
        mc.on("doubletap", function(ev) {
          console.log("double tap");
        });

    </script>


    </body>
</html>
